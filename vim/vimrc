"different setting between different os
if has("win32") || has("win16")
    set rtp+=~/vimfiles/bundle/Vundle.vim/
    let path='~/vimfiles/bundle'
else 
    set rtp+=~/.vim/bundle/Vundle.vim
endif

set nocompatible
filetype plugin indent on
syntax on

" use git protocol by default other than https
"let g:vundle_default_git_proto = 'git'

"==================================================
" plugins
if has("win32") || has("win16")
    call vundle#begin(path)
else 
    call vundle#begin()
endif
"Vundle
Plugin 'gmarik/Vundle.vim'

"snippets
Plugin 'MarcWeber/vim-addon-mw-utils'
Plugin 'tomtom/tlib_vim'
Plugin 'garbas/vim-snipmate'
Plugin 'honza/vim-snippets'

" auto closing brackets
Plugin 'jiangmiao/auto-pairs'

" color scheme
Plugin 'BusyBee'
Plugin 'altercation/vim-colors-solarized'
Plugin 'goatslacker/mango.vim'

" status line
Plugin 'bling/vim-airline'

" show marks
Plugin 'kshenoy/vim-signature'

" multiple line edit
Plugin 'terryma/vim-multiple-cursors'

" operate on surroundings
Plugin 'tpope/vim-surround'

" directory tree
Plugin 'scrooloose/nerdtree'

" tagbar
Plugin 'majutsushi/tagbar'
Plugin 'marijnh/tern_for_vim'

Plugin 'tpope/vim-fugitive'

" quick file finder 
Plugin 'kien/ctrlp.vim'

" smooth scroll when pressing ctrl+d or ctrl u
Plugin 'joeytwiddle/sexy_scroller.vim'

" syntax checker
Plugin 'scrooloose/syntastic'

" javascript related
" for the autoformat to work for javascript, first need to install a global
" node modue, npm install -g js-beautify
Plugin 'Chiel92/vim-autoformat'
Plugin 'pangloss/vim-javascript' 

" distinguish json from javascript
Plugin 'elzr/vim-json'

" mark down
Plugin 'godlygeek/tabular'
Plugin 'plasticboy/vim-markdown'

" note taking plugin
Plugin 'xolox/vim-misc'
Plugin 'xolox/vim-notes'

" easy motion( move around super fast )
Plugin 'Lokaltog/vim-easymotion'

" local vimrc solution
Plugin 'MarcWeber/vim-addon-local-vimrc'


call vundle#end()
"==================================================

"markdown file extension recognization
au BufRead,BufNewFile *.md set filetype=markdown

" allow backspace to delete auto indention , line breaks, and the start of
" insertion
set backspace=indent,eol,start

" always show status line
set laststatus=2

" no swap file
set noswapfile

" turn on wildmenu
set wildmenu

" access system clipboard
set clipboard=unnamed

" search ignore case by default
set ic

" highlight search
set hls

" increment search
set is

" map leader to space
let mapleader=" "

"no line wrap
set nowrap

" appearence 
set background=light
if &term =~ "^xterm"
    let g:solarized_termcolors=256
endif
colorscheme solarized
set number
set showcmd
set cursorline


" indention
set smartindent
set autoindent
set tabstop=4
set softtabstop=4
set shiftwidth=4
set expandtab

" code format
nmap <leader>f :Autoformat<cr>

" ctrlp settings
let g:ctrlp_working_path_mode=0  
let g:ctrlp_max_files=0
let g:ctrlp_max_height=20

" notes directory
let g:notes_directories = ['~/junshen/gitrepo/notes']

" tagbar ctag configuration



" syntastic configuration
set statusline+=%#warningmsg#
set statusline+=%{SyntasticStatuslineFlag()}
set statusline+=%*

let g:syntastic_javascript_checkers = ["eslint"]
let g:syntastic_always_populate_loc_list = 1
let g:syntastic_auto_loc_list = 1
let g:syntastic_check_on_open = 1
let g:syntastic_check_on_wq = 0

" press enter to insert new lines
nmap <CR> o<Esc>

" Smart way to manage windows
nmap <leader>w <c-w>

" toggle tag bar
nmap <leader>tb :TagbarToggle<CR>

" quick insert semicolon at the end of the line
nmap <leader>; A;<Esc>

" for not to lose the yanked text after pasting over selection
xnoremap p pgvy

" nerdtree 
nmap  <leader>nd :NERDTreeToggle<cr>
let g:nerdtree_tabs_open_on_gui_startup=0 

" multi-cursor configuration
let g:multi_cursor_exit_from_insert_mode = 0

" easy motion highlighting color
hi link EasyMotionTarget ErrorMsg
hi link EasyMotionShade  Comment

hi link EasyMotionTarget2First ErrorMsg
hi link EasyMotionTarget2Second ErrorMsg

"cursor shape change in different mode in iterm2
if $TERM_PROGRAM =~ "iTerm"
    let &t_SI = "\<Esc>]50;CursorShape=1\x7" " Vertical bar in insert mode
    let &t_EI = "\<Esc>]50;CursorShape=0\x7" " Block in normal mode
elseif &term =~ "^xterm"
    let &t_SI .= "\<Esc>[5 q"
    let &t_EI .= "\<Esc>[2 q"
endif
